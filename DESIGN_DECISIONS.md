# AI Trivia Arena - SupaQuiz: Design Decisions & Assumptions

---

## 0. prefix
  - **What remains to be done**
  - Rate Limiting SupaBase DB calls
  - Rate limiting Supabase Functions calls
  - Add loading state component(spinner)
  - Use Interfaces instead of any
  - More error handling and messages

## 1. Architecture

- **Frontend:**  
  - Built with React (TypeScript), for modularity and maintainability. Class-less using hooks.
  - Uses Supabase JS client for API instead of fetch. This provides better integration to backend project.
  - UI is retro-inspired for engaging user experience.
  - TypeScript is used for static typing, improving reliability and maintainability. 

- **Backend:**  
  - Supabase for database, and Edge Functions.
  - Edge Functions (TypeScript) handle all AI (OpenAI/Gemini) interactions securely.
  - No sensitive keys exposed to the frontend.
  - TypeScript is used with static typing.

---

## 2. Game Flow

- **Single-player mode:**  
  - No persistent authentication; username is used for session and score tracking.
- **Question Generation:**  
  - Each question is generated by an LLM in real-time via Edge Functions.
  - Only one correct answer per question.
  - Answer explanations generated after each response.
  - LLM questions and correct answers are saved in the DB.

- **Timing:**  
  - Each question has a 10-second timer.
  - If time expires, answer is marked incorrect and explanation is shown.

---


## 3. Security

- **API Keys:**  
  - All AI API keys are stored and accessed only on the backend (Edge Functions).
  - Vercel has the Keys for Supabase and environmental variables, which it uses during runtime.

- **CORS:**  
  - All are allowed for testing, I will change it after testing to only allow vercel.

---

## 4. Cost & Performance

- **Cost Reduction:**  
  - LLM prompts are concise, limiting token usage.
  - No persistent user accounts to minimize database load.
  - Caching is not implemented, but could be added for repeated questions.

- **Performance:**  
  - Most operations are single-player and stateless for scalability.

---

## 5. Extensibility

- **LLM Providers:**  
  - Easily add new LLMs by modularizing Edge Functions.
- **Future Features:**  
  - Can add multiplayer, leaderboards, authentication, or more question types.

---

## 6. UI/UX Assumptions

- **Retro styling:**  
  - CSS and animations mimic classic arcade games.

---

## 7. Deployment

- Read Developer documentation

---

## 8. Assumptions

- AI models are always available and respond within a few seconds.
- Usernames are unique for session/score tracking.
- Supabase project and Edge Functions are set up correctly before starting.
- All environment variables provided (API keys, URLs).
- Developers have access to required services (Supabase, Vercel, OpenAI/Gemini).

---

## 9. Data Management

- **Database Schema:**
  - Questions table: stores generated questions, correct answers, and metadata
  - Game sessions: temporary session data with username and current score
  - Scores table: high scores and statistics
  - No user profiles to keep it lightweight

- **Data Flow:**
  - Frontend → Supabase Client → Edge Functions → AI APIs
  - Real-time updates using Supabase subscriptions for live game state
  - Session data cleaned up after game completion

---

## 10. Development Workflow

- **Environment Setup:**
  - Local development uses Supabase local development
  - Environment-specific configuration files
  - Hot reload for both frontend and Edge Functions

- **Version Control:**
  - Conventional github
  - Automated deployment on main branch can be implemented with webhooks

---